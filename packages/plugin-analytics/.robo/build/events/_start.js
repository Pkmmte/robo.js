import { logger } from "robo.js";
import { setAnalytics } from "../utils/analytics.js";
import { GoogleAnalytics } from "../utils/GoogleAnalytics.js";
import { ManyEngines } from "../utils/ManyEngines.js";
import { PlausibleAnalytics } from "../utils/PlausibleAnalytics.js";
export let pluginOptions = {};
export default ((_client, options)=>{
    pluginOptions = options ?? {};
    if (pluginOptions.engine) {
        setAnalytics(pluginOptions.engine);
        return;
    }
    const GAnalytics = process.env.GOOGLE_ANALYTICS_MEASURE_ID;
    const PAnalytics = process.env.PLAUSIBLE_DOMAIN_NAME;
    if (GAnalytics && PAnalytics) {
        setAnalytics(new ManyEngines(new GoogleAnalytics(), new PlausibleAnalytics()));
        return;
    }
    if (GAnalytics) {
        setAnalytics(new GoogleAnalytics());
        return;
    }
    if (PAnalytics) {
        setAnalytics(new PlausibleAnalytics());
        return;
    }
    return logger.warn('No Analytics Engine, please provide one, see https://robojs.dev/plugins/analytics to learn how.');
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcY2Vsc2lcXERvY3VtZW50c1xcUHJvZ3JhbW1pbmdcXFdvcmtcXHJvYm8uanNcXHBhY2thZ2VzXFxwbHVnaW4tYW5hbHl0aWNzXFxzcmNcXGV2ZW50c1xcX3N0YXJ0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGxvZ2dlciB9IGZyb20gJ3JvYm8uanMnXHJcbmltcG9ydCB7IEJhc2VFbmdpbmUsIHNldEFuYWx5dGljcyB9IGZyb20gJy4uL3V0aWxzL2FuYWx5dGljcydcclxuaW1wb3J0IHsgR29vZ2xlQW5hbHl0aWNzIH0gZnJvbSAnLi4vdXRpbHMvR29vZ2xlQW5hbHl0aWNzJ1xyXG5pbXBvcnQgeyBNYW55RW5naW5lcyB9IGZyb20gJy4uL3V0aWxzL01hbnlFbmdpbmVzJ1xyXG5pbXBvcnQgeyBQbGF1c2libGVBbmFseXRpY3MgfSBmcm9tICcuLi91dGlscy9QbGF1c2libGVBbmFseXRpY3MnXHJcblxyXG5pbnRlcmZhY2UgUGx1Z2luT3B0aW9ucyB7XHJcblx0ZW5naW5lPzogQmFzZUVuZ2luZVxyXG59XHJcbmV4cG9ydCBsZXQgcGx1Z2luT3B0aW9uczogUGx1Z2luT3B0aW9ucyA9IHt9XHJcblxyXG5leHBvcnQgZGVmYXVsdCAoX2NsaWVudDogdW5rbm93biwgb3B0aW9uczogUGx1Z2luT3B0aW9ucykgPT4ge1xyXG5cdHBsdWdpbk9wdGlvbnMgPSBvcHRpb25zID8/IHt9XHJcblxyXG5cdGlmIChwbHVnaW5PcHRpb25zLmVuZ2luZSkge1xyXG5cdFx0c2V0QW5hbHl0aWNzKHBsdWdpbk9wdGlvbnMuZW5naW5lKVxyXG5cdFx0cmV0dXJuXHJcblx0fVxyXG5cclxuXHRjb25zdCBHQW5hbHl0aWNzID0gcHJvY2Vzcy5lbnYuR09PR0xFX0FOQUxZVElDU19NRUFTVVJFX0lEXHJcblx0Y29uc3QgUEFuYWx5dGljcyA9IHByb2Nlc3MuZW52LlBMQVVTSUJMRV9ET01BSU5fTkFNRVxyXG5cclxuXHRpZiAoR0FuYWx5dGljcyAmJiBQQW5hbHl0aWNzKSB7XHJcblx0XHRzZXRBbmFseXRpY3MobmV3IE1hbnlFbmdpbmVzKG5ldyBHb29nbGVBbmFseXRpY3MoKSwgbmV3IFBsYXVzaWJsZUFuYWx5dGljcygpKSlcclxuXHRcdHJldHVyblxyXG5cdH1cclxuXHJcblx0aWYgKEdBbmFseXRpY3MpIHtcclxuXHRcdHNldEFuYWx5dGljcyhuZXcgR29vZ2xlQW5hbHl0aWNzKCkpXHJcblx0XHRyZXR1cm5cclxuXHR9XHJcblxyXG5cdGlmIChQQW5hbHl0aWNzKSB7XHJcblx0XHRzZXRBbmFseXRpY3MobmV3IFBsYXVzaWJsZUFuYWx5dGljcygpKVxyXG5cdFx0cmV0dXJuXHJcblx0fVxyXG5cclxuXHRyZXR1cm4gbG9nZ2VyLndhcm4oJ05vIEFuYWx5dGljcyBFbmdpbmUsIHBsZWFzZSBwcm92aWRlIG9uZSwgc2VlIGh0dHBzOi8vcm9ib2pzLmRldi9wbHVnaW5zL2FuYWx5dGljcyB0byBsZWFybiBob3cuJylcclxufVxyXG4iXSwibmFtZXMiOlsibG9nZ2VyIiwic2V0QW5hbHl0aWNzIiwiR29vZ2xlQW5hbHl0aWNzIiwiTWFueUVuZ2luZXMiLCJQbGF1c2libGVBbmFseXRpY3MiLCJwbHVnaW5PcHRpb25zIiwiX2NsaWVudCIsIm9wdGlvbnMiLCJlbmdpbmUiLCJHQW5hbHl0aWNzIiwicHJvY2VzcyIsImVudiIsIkdPT0dMRV9BTkFMWVRJQ1NfTUVBU1VSRV9JRCIsIlBBbmFseXRpY3MiLCJQTEFVU0lCTEVfRE9NQUlOX05BTUUiLCJ3YXJuIl0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxNQUFNLFFBQVEsVUFBUztBQUNoQyxTQUFxQkMsWUFBWSxRQUFRLHdCQUFvQjtBQUM3RCxTQUFTQyxlQUFlLFFBQVEsOEJBQTBCO0FBQzFELFNBQVNDLFdBQVcsUUFBUSwwQkFBc0I7QUFDbEQsU0FBU0Msa0JBQWtCLFFBQVEsaUNBQTZCO0FBS2hFLE9BQU8sSUFBSUMsZ0JBQStCLENBQUMsRUFBQztBQUU1QyxlQUFlLENBQUEsQ0FBQ0MsU0FBa0JDO0lBQ2pDRixnQkFBZ0JFLFdBQVcsQ0FBQztJQUU1QixJQUFJRixjQUFjRyxNQUFNLEVBQUU7UUFDekJQLGFBQWFJLGNBQWNHLE1BQU07UUFDakM7SUFDRDtJQUVBLE1BQU1DLGFBQWFDLFFBQVFDLEdBQUcsQ0FBQ0MsMkJBQTJCO0lBQzFELE1BQU1DLGFBQWFILFFBQVFDLEdBQUcsQ0FBQ0cscUJBQXFCO0lBRXBELElBQUlMLGNBQWNJLFlBQVk7UUFDN0JaLGFBQWEsSUFBSUUsWUFBWSxJQUFJRCxtQkFBbUIsSUFBSUU7UUFDeEQ7SUFDRDtJQUVBLElBQUlLLFlBQVk7UUFDZlIsYUFBYSxJQUFJQztRQUNqQjtJQUNEO0lBRUEsSUFBSVcsWUFBWTtRQUNmWixhQUFhLElBQUlHO1FBQ2pCO0lBQ0Q7SUFFQSxPQUFPSixPQUFPZSxJQUFJLENBQUM7QUFDcEIsQ0FBQSxFQUFDIn0=