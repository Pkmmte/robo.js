"use strict";(self.webpackChunkrobo_js_docs=self.webpackChunkrobo_js_docs||[]).push([[3365],{6105:(e,t,n)=>{n.r(t),n.d(t,{default:()=>R});var r=n(6540),i=n(7989);const o=300,s="https://stackblitz.com",a=["angular-cli","create-react-app","html","javascript","node","polymer","typescript","vue"],c=["project","search","ports","settings"],d=["light","dark"],l=["editor","preview"],u={clickToLoad:e=>h("ctl",e),devToolsHeight:e=>m("devtoolsheight",e),forceEmbedLayout:e=>h("embed",e),hideDevTools:e=>h("hidedevtools",e),hideExplorer:e=>h("hideExplorer",e),hideNavigation:e=>h("hideNavigation",e),openFile:e=>g("file",e),showSidebar:e=>function(e,t){if("boolean"==typeof t)return`${e}=${t?"1":"0"}`;return""}("showSidebar",e),sidebarView:e=>f("sidebarView",e,c),startScript:e=>g("startScript",e),terminalHeight:e=>m("terminalHeight",e),theme:e=>f("theme",e,d),view:e=>f("view",e,l),zenMode:e=>h("zenMode",e),organization:e=>`${g("orgName",e?.name)}&${g("orgProvider",e?.provider)}`,crossOriginIsolated:e=>h("corp",e)};function p(e={}){const t=Object.entries(e).map((([e,t])=>null!=t&&u.hasOwnProperty(e)?u[e](t):"")).filter(Boolean);return t.length?`?${t.join("&")}`:""}function h(e,t){return!0===t?`${e}=1`:""}function m(e,t){if("number"==typeof t&&!Number.isNaN(t)){const n=Math.min(100,Math.max(0,t));return`${e}=${encodeURIComponent(Math.round(n))}`}return""}function f(e,t="",n=[]){return n.includes(t)?`${e}=${encodeURIComponent(t)}`:""}function g(e,t){return(Array.isArray(t)?t:[t]).filter((e=>"string"==typeof e&&""!==e.trim())).map((t=>`${e}=${encodeURIComponent(t)}`)).join("&")}function y(){return Math.random().toString(36).slice(2,6)+Math.random().toString(36).slice(2,6)}function b(e,t){return`${_(t)}${e}${p(t)}`}function w(e,t){const n={forceEmbedLayout:!0};return t&&"object"==typeof t&&Object.assign(n,t),`${_(n)}${e}${p(n)}`}function _(e={}){return("string"==typeof e.origin?e.origin:s).replace(/\/$/,"")}function j(e,t,n){if(!t||!e||!e.parentNode)throw new Error("Invalid Element");e.id&&(t.id=e.id),e.className&&(t.className=e.className),function(e,t={}){const n=Object.hasOwnProperty.call(t,"height")?`${t.height}`:`${o}`,r=Object.hasOwnProperty.call(t,"width")?`${t.width}`:void 0;e.setAttribute("height",n),r?e.setAttribute("width",r):e.setAttribute("style","width:100%;")}(t,n),function(e,t,n={}){const r=e.allow?.split(";")?.map((e=>e.trim()))??[];n.crossOriginIsolated&&!r.includes("cross-origin-isolated")&&r.push("cross-origin-isolated");r.length>0&&(t.allow=r.join("; "))}(e,t,n),e.replaceWith(t)}function v(e){if("string"==typeof e){const t=document.getElementById(e);if(!t)throw new Error(`Could not find element with id '${e}'`);return t}if(e instanceof HTMLElement)return e;throw new Error(`Invalid element: ${e}`)}function E(e){return e&&!1===e.newWindow?"_self":"_blank"}class S{constructor(e){this.pending={},this.port=e,this.port.onmessage=this.messageListener.bind(this)}request({type:e,payload:t}){return new Promise(((n,r)=>{const i=y();this.pending[i]={resolve:n,reject:r},this.port.postMessage({type:e,payload:{...t,__reqid:i}})}))}messageListener(e){if("string"!=typeof e.data.payload?.__reqid)return;const{type:t,payload:n}=e.data,{__reqid:r,__success:i,__error:o}=n;this.pending[r]&&(i?this.pending[r].resolve(this.cleanResult(n)):this.pending[r].reject(o?`${t}: ${o}`:t),delete this.pending[r])}cleanResult(e){const t={...e};return delete t.__reqid,delete t.__success,delete t.__error,Object.keys(t).length?t:null}}class ${constructor(e,t){this.editor={openFile:e=>this._rdc.request({type:"SDK_OPEN_FILE",payload:{path:e}}),setCurrentFile:e=>this._rdc.request({type:"SDK_SET_CURRENT_FILE",payload:{path:e}}),setTheme:e=>this._rdc.request({type:"SDK_SET_UI_THEME",payload:{theme:e}}),setView:e=>this._rdc.request({type:"SDK_SET_UI_VIEW",payload:{view:e}}),showSidebar:(e=!0)=>this._rdc.request({type:"SDK_TOGGLE_SIDEBAR",payload:{visible:e}})},this.preview={origin:"",getUrl:()=>this._rdc.request({type:"SDK_GET_PREVIEW_URL",payload:{}}).then((e=>e?.url??null)),setUrl:(e="/")=>{if("string"!=typeof e||!e.startsWith("/"))throw new Error(`Invalid argument: expected a path starting with '/', got '${e}'`);return this._rdc.request({type:"SDK_SET_PREVIEW_URL",payload:{path:e}})}},this._rdc=new S(e),Object.defineProperty(this.preview,"origin",{value:"string"==typeof t.previewOrigin?t.previewOrigin:null,writable:!1})}applyFsDiff(e){const t=e=>null!==e&&"object"==typeof e;if(!t(e)||!t(e.create))throw new Error("Invalid diff object: expected diff.create to be an object.");if(!Array.isArray(e.destroy))throw new Error("Invalid diff object: expected diff.destroy to be an array.");return this._rdc.request({type:"SDK_APPLY_FS_DIFF",payload:e})}getDependencies(){return this._rdc.request({type:"SDK_GET_DEPS_SNAPSHOT",payload:{}})}getFsSnapshot(){return this._rdc.request({type:"SDK_GET_FS_SNAPSHOT",payload:{}})}}const I=[];class P{constructor(e){this.id=y(),this.element=e,this.pending=new Promise(((e,t)=>{const n=({data:t,ports:n})=>{"SDK_INIT_SUCCESS"===t?.action&&t.id===this.id&&(this.vm=new $(n[0],t.payload),e(this.vm),i())},r=()=>{this.element.contentWindow?.postMessage({action:"SDK_INIT",id:this.id},"*")};function i(){window.clearInterval(s),window.removeEventListener("message",n)}window.addEventListener("message",n),r();let o=0;const s=window.setInterval((()=>{if(this.vm)i();else{if(o>=20)return i(),t("Timeout: Unable to establish a connection with the StackBlitz VM"),void I.forEach(((e,t)=>{e.id===this.id&&I.splice(t,1)}));o++,r()}}),500)})),I.push(this)}}const T=e=>{const t=e instanceof Element?"element":"id";return I.find((n=>n[t]===e))??null};function F({template:e,title:t,description:n,dependencies:r,files:i,settings:o}){if(!a.includes(e)){const e=a.map((e=>`'${e}'`)).join(", ");console.warn(`Unsupported project.template: must be one of ${e}`)}const s=[],c=(e,t,n="")=>{s.push(function(e,t){const n=document.createElement("input");return n.type="hidden",n.name=e,n.value=t,n}(e,"string"==typeof t?t:n))};c("project[title]",t),"string"==typeof n&&n.length>0&&c("project[description]",n),c("project[template]",e,"javascript"),r&&("node"===e?console.warn("Invalid project.dependencies: dependencies must be provided as a 'package.json' file when using the 'node' template."):c("project[dependencies]",JSON.stringify(r))),o&&c("project[settings]",JSON.stringify(o)),Object.entries(i).forEach((([e,t])=>{c(`project[files][${function(e){return e.replace(/\[/g,"%5B").replace(/\]/g,"%5D")}(e)}]`,t)}));const d=document.createElement("form");return d.method="POST",d.setAttribute("style","display:none!important;"),d.append(...s),d}function x(e){if(!e?.contentWindow)return Promise.reject("Provided element is not an iframe.");return(T(e)??new P(e)).pending}const D={connect:x,embedGithubProject:function(e,t,n){const r=v(e),i=document.createElement("iframe");return i.src=w(`/github/${t}`,n),j(r,i,n),x(i)},embedProject:function(e,t,n){const r=v(e),i=function(e,t){const n=F(e);return n.action=w("/run",t),n.id="sb_run",`<!doctype html>\n<html>\n<head><title></title></head>\n<body>\n  ${n.outerHTML}\n  <script>document.getElementById('${n.id}').submit();<\/script>\n</body>\n</html>`}(t,n),o=document.createElement("iframe");return j(r,o,n),o.contentDocument?.write(i),x(o)},embedProjectId:function(e,t,n){const r=v(e),i=document.createElement("iframe");return i.src=w(`/edit/${t}`,n),j(r,i,n),x(i)},openGithubProject:function(e,t){const n=b(`/github/${e}`,t),r=E(t);window.open(n,r)},openProject:function(e,t){!function(e,t){const n=F(e);n.action=b("/run",t),n.target=E(t),document.body.appendChild(n),n.submit(),document.body.removeChild(n)}(e,t)},openProjectId:function(e,t){const n=b(`/edit/${e}`,t),r=E(t);window.open(n,r)}},N={main:"main_zHft",searchBar:"searchBar_T0s_",searchBarContainer:"searchBarContainer_sEdO",searchBarFocus:"searchBarFocus_kzQG",searchBarFocusContainer:"searchBarFocusContainer_egJO"};var O=n(5293),C=n(4848);function B(){const[e,t]=(0,r.useState)(0),[n,i]=(0,r.useState)(!1),[o,s]=(0,r.useState)(!0),{colorMode:a}=(0,O.G)(),c=(0,r.useRef)(null),d=(0,r.useRef)(null),l=[{name:"starter bot ts",link:"Wave-Play/robo.js/tree/main/templates/starter-bot-typescript",openFile:""},{name:"starter bot js",link:"Wave-Play/robo.js/tree/main/templates/starter-bot-javascript",openFile:""},{name:"starter bot ts",link:"Wave-Play/robo.js/tree/main/templates/starter-bot-typescript",openFile:""}];return(0,r.useEffect)((()=>{d&&d.current&&d.current.setTheme(a)}),[a]),(0,r.useEffect)((()=>{c&&c.current&&(s(!0),D.embedGithubProject("embed",l[e].link,{devToolsHeight:40,openFile:l[e].openFile?[l[e].openFile]:void 0,showSidebar:!0,terminalHeight:40,theme:a,view:"default"}).then((e=>{s(!1),d.current=e.editor})))}),[e]),(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:N.searchBarContainer,style:{height:n?"27px":"unset"},children:function(){if(!o)return n?(0,C.jsx)(k,{data:l,setProjectIdx:t,setDropdown:i}):(0,C.jsx)("input",{className:N.searchBar,onFocus:()=>i(!0),placeholder:"Search for a Robo template"})}()}),(0,C.jsx)("div",{ref:c,id:"embed"})]})}function k(e){const{data:t,setProjectIdx:n,setDropdown:i}=e,[o,s]=(0,r.useState)("");return(0,C.jsxs)("div",{className:N.searchBarFocusContainer,children:[(0,C.jsx)("input",{className:N.searchBarFocus,onChange:e=>s(e.target.value),value:o,placeholder:"Search for a Robo template"}),"q",t.map(((e,t)=>{if(e.name.includes(o))return(0,C.jsx)("p",{onClick:()=>{n(t),i(!1)},children:e.name})}))]})}function R(){return(0,C.jsx)(i.A,{title:"Playground",description:"Try out Robo.js in your browser!",children:(0,C.jsx)("main",{style:{width:"100%",height:"calc(100vh - 64px)",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",position:"relative"},className:N.main,children:(0,C.jsx)(B,{})})})}}}]);