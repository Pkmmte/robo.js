"use strict";(self.webpackChunkrobo_js_docs=self.webpackChunkrobo_js_docs||[]).push([[6342],{8708:(e,t,n)=>{n.r(t),n.d(t,{default:()=>L});var r=n(7294),i=n(3295);const o=300,s="https://stackblitz.com",a=["angular-cli","create-react-app","html","javascript","node","polymer","typescript","vue"],c=["project","search","ports","settings"],l=["light","dark"],d=["editor","preview"],u={clickToLoad:e=>h("ctl",e),devToolsHeight:e=>m("devtoolsheight",e),forceEmbedLayout:e=>h("embed",e),hideDevTools:e=>h("hidedevtools",e),hideExplorer:e=>h("hideExplorer",e),hideNavigation:e=>h("hideNavigation",e),openFile:e=>g("file",e),showSidebar:e=>function(e,t){if("boolean"==typeof t)return`${e}=${t?"1":"0"}`;return""}("showSidebar",e),sidebarView:e=>f("sidebarView",e,c),startScript:e=>g("startScript",e),terminalHeight:e=>m("terminalHeight",e),theme:e=>f("theme",e,l),view:e=>f("view",e,d),zenMode:e=>h("zenMode",e),organization:e=>`${g("orgName",e?.name)}&${g("orgProvider",e?.provider)}`};function p(e={}){const t=Object.entries(e).map((([e,t])=>null!=t&&u.hasOwnProperty(e)?u[e](t):"")).filter(Boolean);return t.length?`?${t.join("&")}`:""}function h(e,t){return!0===t?`${e}=1`:""}function m(e,t){if("number"==typeof t&&!Number.isNaN(t)){const n=Math.min(100,Math.max(0,t));return`${e}=${encodeURIComponent(Math.round(n))}`}return""}function f(e,t="",n=[]){return n.includes(t)?`${e}=${encodeURIComponent(t)}`:""}function g(e,t){return(Array.isArray(t)?t:[t]).filter((e=>"string"==typeof e&&""!==e.trim())).map((t=>`${e}=${encodeURIComponent(t)}`)).join("&")}function y(){return Math.random().toString(36).slice(2,6)+Math.random().toString(36).slice(2,6)}function w(e,t){return`${b(t)}${e}${p(t)}`}function _(e,t){const n={forceEmbedLayout:!0};return t&&"object"==typeof t&&Object.assign(n,t),`${b(n)}${e}${p(n)}`}function b(e={}){return("string"==typeof e.origin?e.origin:s).replace(/\/$/,"")}function E(e,t,n){if(!t||!e||!e.parentNode)throw new Error("Invalid Element");e.id&&(t.id=e.id),e.className&&(t.className=e.className),function(e,t={}){const n=Object.hasOwnProperty.call(t,"height")?`${t.height}`:`${o}`,r=Object.hasOwnProperty.call(t,"width")?`${t.width}`:void 0;e.setAttribute("height",n),r?e.setAttribute("width",r):e.setAttribute("style","width:100%;")}(t,n),e.replaceWith(t)}function v(e){if("string"==typeof e){const t=document.getElementById(e);if(!t)throw new Error(`Could not find element with id '${e}'`);return t}if(e instanceof HTMLElement)return e;throw new Error(`Invalid element: ${e}`)}function S(e){return e&&!1===e.newWindow?"_self":"_blank"}class j{constructor(e){this.pending={},this.port=e,this.port.onmessage=this.messageListener.bind(this)}request({type:e,payload:t}){return new Promise(((n,r)=>{const i=y();this.pending[i]={resolve:n,reject:r},this.port.postMessage({type:e,payload:{...t,__reqid:i}})}))}messageListener(e){if("string"!=typeof e.data.payload?.__reqid)return;const{type:t,payload:n}=e.data,{__reqid:r,__success:i,__error:o}=n;this.pending[r]&&(i?this.pending[r].resolve(this.cleanResult(n)):this.pending[r].reject(o?`${t}: ${o}`:t),delete this.pending[r])}cleanResult(e){const t={...e};return delete t.__reqid,delete t.__success,delete t.__error,Object.keys(t).length?t:null}}class ${constructor(e,t){this.editor={openFile:e=>this._rdc.request({type:"SDK_OPEN_FILE",payload:{path:e}}),setCurrentFile:e=>this._rdc.request({type:"SDK_SET_CURRENT_FILE",payload:{path:e}}),setTheme:e=>this._rdc.request({type:"SDK_SET_UI_THEME",payload:{theme:e}}),setView:e=>this._rdc.request({type:"SDK_SET_UI_VIEW",payload:{view:e}}),showSidebar:(e=!0)=>this._rdc.request({type:"SDK_TOGGLE_SIDEBAR",payload:{visible:e}})},this.preview={origin:"",getUrl:()=>this._rdc.request({type:"SDK_GET_PREVIEW_URL",payload:{}}).then((e=>e?.url??null)),setUrl:(e="/")=>{if("string"!=typeof e||!e.startsWith("/"))throw new Error(`Invalid argument: expected a path starting with '/', got '${e}'`);return this._rdc.request({type:"SDK_SET_PREVIEW_URL",payload:{path:e}})}},this._rdc=new j(e),Object.defineProperty(this.preview,"origin",{value:"string"==typeof t.previewOrigin?t.previewOrigin:null,writable:!1})}applyFsDiff(e){const t=e=>null!==e&&"object"==typeof e;if(!t(e)||!t(e.create))throw new Error("Invalid diff object: expected diff.create to be an object.");if(!Array.isArray(e.destroy))throw new Error("Invalid diff object: expected diff.destroy to be an array.");return this._rdc.request({type:"SDK_APPLY_FS_DIFF",payload:e})}getDependencies(){return this._rdc.request({type:"SDK_GET_DEPS_SNAPSHOT",payload:{}})}getFsSnapshot(){return this._rdc.request({type:"SDK_GET_FS_SNAPSHOT",payload:{}})}}const I=[];class P{constructor(e){this.id=y(),this.element=e,this.pending=new Promise(((e,t)=>{const n=({data:t,ports:n})=>{"SDK_INIT_SUCCESS"===t?.action&&t.id===this.id&&(this.vm=new $(n[0],t.payload),e(this.vm),i())},r=()=>{this.element.contentWindow?.postMessage({action:"SDK_INIT",id:this.id},"*")};function i(){window.clearInterval(s),window.removeEventListener("message",n)}window.addEventListener("message",n),r();let o=0;const s=window.setInterval((()=>{if(this.vm)i();else{if(o>=20)return i(),t("Timeout: Unable to establish a connection with the StackBlitz VM"),void I.forEach(((e,t)=>{e.id===this.id&&I.splice(t,1)}));o++,r()}}),500)})),I.push(this)}}const T=e=>{const t=e instanceof Element?"element":"id";return I.find((n=>n[t]===e))??null};function C({template:e,title:t,description:n,dependencies:r,files:i,settings:o}){if(!a.includes(e)){const e=a.map((e=>`'${e}'`)).join(", ");console.warn(`Unsupported project.template: must be one of ${e}`)}const s=[],c=(e,t,n="")=>{s.push(function(e,t){const n=document.createElement("input");return n.type="hidden",n.name=e,n.value=t,n}(e,"string"==typeof t?t:n))};c("project[title]",t),"string"==typeof n&&n.length>0&&c("project[description]",n),c("project[template]",e,"javascript"),r&&("node"===e?console.warn("Invalid project.dependencies: dependencies must be provided as a 'package.json' file when using the 'node' template."):c("project[dependencies]",JSON.stringify(r))),o&&c("project[settings]",JSON.stringify(o)),Object.entries(i).forEach((([e,t])=>{c(`project[files][${function(e){return e.replace(/\[/g,"%5B").replace(/\]/g,"%5D")}(e)}]`,t)}));const l=document.createElement("form");return l.method="POST",l.setAttribute("style","display:none!important;"),l.append(...s),l}function N(e){if(!e?.contentWindow)return Promise.reject("Provided element is not an iframe.");return(T(e)??new P(e)).pending}const D={connect:N,embedGithubProject:function(e,t,n){const r=v(e),i=document.createElement("iframe");return i.src=_(`/github/${t}`,n),E(r,i,n),N(i)},embedProject:function(e,t,n){const r=v(e),i=function(e,t){const n=C(e);return n.action=_("/run",t),n.id="sb_run",`<!doctype html>\n<html>\n<head><title></title></head>\n<body>\n  ${n.outerHTML}\n  <script>document.getElementById('${n.id}').submit();<\/script>\n</body>\n</html>`}(t,n),o=document.createElement("iframe");return E(r,o,n),o.contentDocument?.write(i),N(o)},embedProjectId:function(e,t,n){const r=v(e),i=document.createElement("iframe");return i.src=_(`/edit/${t}`,n),E(r,i,n),N(i)},openGithubProject:function(e,t){const n=w(`/github/${e}`,t),r=S(t);window.open(n,r)},openProject:function(e,t){!function(e,t){const n=C(e);n.action=w("/run",t),n.target=S(t),document.body.appendChild(n),n.submit(),document.body.removeChild(n)}(e,t)},openProjectId:function(e,t){const n=w(`/edit/${e}`,t),r=S(t);window.open(n,r)}},O={main:"main_zHft",searchBar:"searchBar_T0s_",searchBarContainer:"searchBarContainer_sEdO",searchBarFocus:"searchBarFocus_kzQG",searchBarFocusContainer:"searchBarFocusContainer_egJO",templatesContainer:"templatesContainer_Mhoz"};var F=n(2949);function B(){const[e,t]=(0,r.useState)("Wave-Play/robo.js/tree/main/templates/starter-app-js-react"),[n,i]=(0,r.useState)(!1),[o,s]=(0,r.useState)(!0),{colorMode:a}=(0,F.I)(),[c,l]=(0,r.useState)(null),[d,u]=(0,r.useState)(null),p=(0,r.useRef)(null),h=(0,r.useRef)(null);return(0,r.useEffect)((()=>{(async()=>{const e=await fetch("http://localhost:3001/api/templates");if(20!==e.status&&l(e.statusText),e.ok&&200===e.status){const t=await e.json();u(t)}})()}),[]),(0,r.useEffect)((()=>{h&&h.current&&h.current.setTheme(a)}),[a]),(0,r.useEffect)((()=>{p&&p.current&&(s(!0),D.embedGithubProject("embed",e,{devToolsHeight:40,showSidebar:!0,terminalHeight:40,theme:a,view:"default"}).then((e=>{s(!1),h.current=e.editor})))}),[e]),r.createElement(r.Fragment,null,r.createElement("div",{className:O.searchBarContainer,style:{height:n?"27px":"unset"}},function(){if(!o)return n?r.createElement(k,{data:d,setProjectLink:t,setDropdown:i}):r.createElement("input",{className:O.searchBar,onFocus:()=>{null!==c&&i(!0)},placeholder:null!==c?"Search for a Robo template":c})}()),r.createElement("div",{ref:p,id:"embed"}))}function k(e){const{data:t,setProjectLink:n,setDropdown:i}=e,[o,s]=(0,r.useState)("");return r.createElement("div",{className:O.searchBarFocusContainer},r.createElement("input",{className:O.searchBarFocus,onChange:e=>s(e.target.value),value:o,placeholder:"Search for a Robo template"}),r.createElement("div",{style:{overflowY:"scroll"}},null!==t?t.map(((e,t)=>e.subCategory.map(((e,t)=>e.templates.map((e=>e.title.includes(o)?r.createElement("p",{onClick:()=>{n(e.link),i(!1)}},e.title):r.createElement("p",null,"No results were found."))))))):"An error happened while rendering the results."))}function L(){return r.createElement(i.Z,{title:"Playground",description:"Try out Robo.js in your browser!"},r.createElement("main",{style:{width:"100%",height:"calc(100vh - 64px)",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",position:"relative"},className:O.main},r.createElement(B,null)))}}}]);