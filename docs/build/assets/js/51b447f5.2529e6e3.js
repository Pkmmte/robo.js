"use strict";(self.webpackChunkrobo_js_docs=self.webpackChunkrobo_js_docs||[]).push([[4003],{5527:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>l,default:()=>m,frontMatter:()=>i,metadata:()=>c,toc:()=>u});var r=n(4848),s=n(8453),o=n(1470),a=n(9365);const i={image:"https://preview.robojs.dev?path=/discord-bots/sage"},l="\ud83d\udd2e Sage Mode",c={id:"discord-bots/sage",title:"\ud83d\udd2e Sage Mode",description:"Your Robo is more than just a bot; it's got its very own spirit guide: Sage.",source:"@site/docs/discord-bots/sage.md",sourceDirName:"discord-bots",slug:"/discord-bots/sage",permalink:"/discord-bots/sage",draft:!1,unlisted:!1,editUrl:"https://github.com/Wave-Play/robo.js/edit/main/docs/docs/discord-bots/sage.md",tags:[],version:"current",lastUpdatedBy:"Pkmmte Xeleon",lastUpdatedAt:1715550872e3,frontMatter:{image:"https://preview.robojs.dev?path=/discord-bots/sage"},sidebar:"tutorialSidebar",previous:{title:"\u2b50 Migrating",permalink:"/discord-bots/migrate"},next:{title:"\ud83d\udd11 Secrets",permalink:"/discord-bots/secrets"}},d={},u=[{value:"Replies \ud83d\udce9",id:"replies-",level:2},{value:"Deferred Replies \u23f3",id:"deferred-replies-",level:2},{value:"Error Replies \ud83d\udea8",id:"error-replies-",level:2},{value:"Background Errors \ud83c\udf0c",id:"background-errors-",level:2},{value:"Production Mode \ud83c\udfad",id:"production-mode-",level:2},{value:"Configuration \ud83c\udf9b\ufe0f",id:"configuration-\ufe0f",level:2}];function h(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h1,{id:"-sage-mode",children:"\ud83d\udd2e Sage Mode"}),"\n",(0,r.jsx)(t.p,{children:"Your Robo is more than just a bot; it's got its very own spirit guide: Sage."}),"\n",(0,r.jsx)(t.p,{children:"Sage is all about smoothing out the rough edges, doing the heavy lifting, and leaving you with the fun stuff. It's your backstage crew, your invisible helping hand, your automatic pilot. You lead the way, and Sage is there to back you up."}),"\n",(0,r.jsx)(t.h2,{id:"replies-",children:"Replies \ud83d\udce9"}),"\n",(0,r.jsx)(t.p,{children:"Let's kick things off with replies. Normally, you'd need to use interaction.reply() to respond to a command, but Sage has a better idea. Just return your reply straight from your command function, and Sage will make sure it gets where it needs to go. It's tidier, it's simpler, and it even handles the tricky stuff like deferred commands."}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.strong,{children:"Classic Way"})}),"\n"]}),"\n",(0,r.jsxs)(o.A,{groupId:"examples-script",children:[(0,r.jsx)(a.A,{value:"js",label:"Javascript",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-javascript",metastring:'showLineNumbers title="/src/commands/hello.js"',children:"export default (interaction) => {\n\tinteraction.reply({ content: 'Hello, classic!' })\n}\n"})})}),(0,r.jsx)(a.A,{value:"ts",label:"Typescript",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",metastring:'showLineNumbers title="/src/commands/hello.ts"',children:"import type { CommandInteraction } from 'discord.js'\n\nexport default (interaction: CommandInteraction) => {\n\tinteraction.reply({ content: 'Hello, classic!' })\n}\n"})})})]}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.strong,{children:"Sage Way"})}),"\n"]}),"\n",(0,r.jsxs)(o.A,{groupId:"examples-script",children:[(0,r.jsx)(a.A,{value:"js",label:"Javascript",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-javascript",metastring:'showLineNumbers title="/src/commands/hello.js"',children:"export default () => {\n\treturn { content: 'Hello, Sage!' }\n}\n"})})}),(0,r.jsx)(a.A,{value:"ts",label:"Typescript",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",metastring:'showLineNumbers title="/src/commands/hello.ts"',children:"import type { CommandResult } from 'robo.js'\n\nexport default (): CommandResult => {\n\treturn { content: 'Hello, Sage!' }\n}\n"})})})]}),"\n",(0,r.jsx)(t.p,{children:"Or for the minimalists among you..."}),"\n",(0,r.jsxs)(o.A,{groupId:"examples-script",children:[(0,r.jsx)(a.A,{value:"js",label:"Javascript",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-javascript",metastring:'showLineNumbers title="/src/commands/hello.js"',children:"export default () => 'Hello, Sage!'\n"})})}),(0,r.jsx)(a.A,{value:"ts",label:"Typescript",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",metastring:'showLineNumbers title="/src/commands/hello.ts"',children:"import type { CommandResult } from 'robo.js'\n\nexport default (): CommandResult => 'Hello, Sage!'\n"})})})]}),"\n",(0,r.jsx)(t.p,{children:"By the way, Sage has the same game plan for autocomplete functions. And if you decide to go rogue and do your own thing? No problem. Sage knows when to step aside and let you take the wheel."}),"\n",(0,r.jsx)(t.h2,{id:"deferred-replies-",children:"Deferred Replies \u23f3"}),"\n",(0,r.jsx)(t.p,{children:"Every bot runs into tasks that take a bit longer, and that's where deferred replies come in. If you take too long to reply, Discord will serve up an error. That's why Sage steps in to auto-defer your replies if things are taking longer than 250ms. It's like your bot's very own traffic cop, stepping in when things are moving slow and backing off when they're zooming along. You can even customize the threshold or switch it off entirely."}),"\n",(0,r.jsx)(t.p,{children:"Here's how it works:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.strong,{children:"Classic Way"})}),"\n"]}),"\n",(0,r.jsxs)(o.A,{groupId:"examples-script",children:[(0,r.jsx)(a.A,{value:"js",label:"Javascript",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-javascript",metastring:'showLineNumbers title="/src/commands/hello.js"',children:"export default async (interaction) => {\n\tinteraction.deferReply()\n\tawait new Promise((resolve) => setTimeout(resolve, 4000)) // Artificial delay\n\tinteraction.editReply('Hello, classic!')\n}\n"})})}),(0,r.jsx)(a.A,{value:"ts",label:"Typescript",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",metastring:'showLineNumbers title="/src/commands/hello.ts"',children:"import type { CommandInteraction } from 'discord.js'\n\nexport default async (interaction: CommandInteraction) => {\n\tinteraction.deferReply()\n\tawait new Promise((resolve) => setTimeout(resolve, 4000)) // Artificial delay\n\tinteraction.editReply('Hello, classic!')\n}\n"})})})]}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.strong,{children:"Sage Way"})}),"\n"]}),"\n",(0,r.jsxs)(o.A,{groupId:"examples-script",children:[(0,r.jsx)(a.A,{value:"js",label:"Javascript",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-javascript",metastring:'showLineNumbers title="/src/commands/hello.js"',children:"export default async () => {\n\tawait new Promise((resolve) => setTimeout(resolve, 4000))\n\treturn 'Hello, Sage!'\n}\n"})})}),(0,r.jsx)(a.A,{value:"ts",label:"Typescript",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",metastring:'showLineNumbers title="/src/commands/hello.ts"',children:"import type { CommandResult } from 'robo.js'\n\nexport default async (): CommandResult => {\n\tawait new Promise((resolve) => setTimeout(resolve, 4000))\n\treturn 'Hello, Sage!'\n}\n"})})})]}),"\n",(0,r.jsx)(t.p,{children:"And in case you're wondering, Sage won't waste time deferring if it's not needed. Check out how it handles a command that finishes in a flash:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-javascript",metastring:'showLineNumbers title="/src/commands/hello.js"',children:"export default async () => {\n\tawait new Promise((resolve) => setTimeout(resolve, 100))\n\treturn 'Hello, Sage!'\n}\n"})}),"\n",(0,r.jsx)(t.p,{children:"With Sage on your side, your bot can stay snappy and responsive, even when it's got a lot on its plate."}),"\n",(0,r.jsx)(t.h2,{id:"error-replies-",children:"Error Replies \ud83d\udea8"}),"\n",(0,r.jsx)(t.p,{children:"Everyone fumbles sometimes, even the best coders. But fret not. Sage has your back, like the best debugging buddy you never knew you needed. Stumble in your command functions or events, and Sage will spring into action with a detailed error message, showing you exactly where you tripped up."}),"\n",(0,r.jsx)(t.p,{children:"Let's say you've got a command function with a not-so-obvious oopsie:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-javascript",metastring:'showLineNumbers title="/src/commands/whoooops.js"',children:"export default () => {\n  const undefinedVariable\n  return undefinedVariable.toString()\n}\n"})}),"\n",(0,r.jsx)(t.p,{children:"Sage won't just shrug it off. It'll dish up the error info, a stack trace to guide your debugging journey, and even a time-locked log snapshot to show you exactly what went down."}),"\n",(0,r.jsx)(t.h2,{id:"background-errors-",children:"Background Errors \ud83c\udf0c"}),"\n",(0,r.jsxs)(t.p,{children:["Sage isn't just there for the obvious fumbles. It's got an eagle eye for the sneaky, behind-the-scenes errors that aren't tied to a command or event. Normally, these culprits could crash your bot, but Sage is on guard. Just remember to set a debug channel in your environment variables (",(0,r.jsx)(t.a,{href:"/docs/basics/secrets",children:"here's how"}),")."]}),"\n",(0,r.jsx)(t.p,{children:"When a rogue error does pop up, Sage will ping it over to your debug channel. This means your bot keeps on trucking, while you're kept in the loop about any under-the-hood hiccups. Just remember, errors are like weeds - best deal with them rather than ignore them."}),"\n",(0,r.jsx)(t.h2,{id:"production-mode-",children:"Production Mode \ud83c\udfad"}),"\n",(0,r.jsx)(t.p,{children:"When your bot steps into the limelight, Sage knows to keep the error messages backstage. You get to keep your channels looking sharp and shiny, free of debug clutter."}),"\n",(0,r.jsxs)(t.p,{children:["If you're hosting with ",(0,r.jsx)(t.strong,{children:"RoboPlay"}),", you're in for a treat! Your Robo dashboard comes with a debugging section that's more than just logs. It's like a treasure trove of debugging gems, complete with error deets, stack traces and time-locked log snapshots."]}),"\n",(0,r.jsx)(t.p,{children:"And if you're hosting elsewhere, remember that not all hosts are created equal. Some might just give you the basic error info, while others might not log errors at all. Sage's aim is to keep you in the loop, without holding your bot back. So, wherever you're hosting, make sure to suss out their logging capabilities."}),"\n",(0,r.jsx)(t.h2,{id:"configuration-\ufe0f",children:"Configuration \ud83c\udf9b\ufe0f"}),"\n",(0,r.jsx)(t.p,{children:"In the bustling world of Robos, flexibility is key, and Sage is no exception. Sage presents a control panel, filled with switches and buttons, granting you the ability to tweak and tune its behavior to your heart's content. Here's what's on the table:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Automatic deferrals:"})," Want to handle deferrals yourself? Flip this switch off."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Deferral threshold:"})," Tweak the time Sage waits before it steps in with a deferral."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Ephemeral replies:"})," Want replies to only be visible to those who trigger commands? Toggle this on."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Error messages:"})," Sometimes, a quiet bot is a good bot. Toggle this to mute Sage's error messages."]}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"You can set these options globally for your entire Robo in the config file, or tune them individually for each command, context menu, or event."}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.strong,{children:"Config File (robo-wide settings)"})}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-javascript",metastring:'showLineNumbers title="/config/robo.mjs"',children:"export default {\n\t// ... other config options\n\tsage: {\n\t\tdefer: false, // Disable automatic deferrals\n\t\tdeferBuffer: 500, // Change deferral threshold to 500ms\n\t\tephemeral: true, // Make all replies ephemeral\n\t\terrorReplies: true // Mute error messages\n\t}\n}\n"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.strong,{children:"Command, Context Menu, or Event Config (individual settings)"})}),"\n"]}),"\n",(0,r.jsxs)(o.A,{groupId:"examples-script",children:[(0,r.jsx)(a.A,{value:"js",label:"Javascript",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-javascript",metastring:'showLineNumbers title="/src/commands/hello.js" {2-7}',children:"export const config = {\n\tsage: {\n\t\tdefer: false,\n\t\tdeferBuffer: 500,\n\t\tephemeral: true,\n\t\terrorReplies: true\n\t}\n}\n\nexport default () => {\n\treturn 'Hello, Sage!'\n}\n"})})}),(0,r.jsx)(a.A,{value:"ts",label:"Typescript",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",metastring:'showLineNumbers title="/src/commands/hello.ts" {4-9}',children:"import type { CommandConfig, CommandResult } from 'robo.js'\n\nexport const config: CommandConfig = {\n\tsage: {\n\t\tdefer: false,\n\t\tdeferBuffer: 500,\n\t\tephemeral: true,\n\t\terrorReplies: true\n\t}\n}\n\nexport default (): CommandResult => {\n\treturn 'Hello, Sage!'\n}\n"})})})]}),"\n",(0,r.jsx)(t.p,{children:"Now you've got the magic wand in your hand, ready to make Sage dance to your tune!"})]})}function m(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},9365:(e,t,n)=>{n.d(t,{A:()=>a});n(6540);var r=n(8215);const s={tabItem:"tabItem_Ymn6"};var o=n(4848);function a(e){let{children:t,hidden:n,className:a}=e;return(0,o.jsx)("div",{role:"tabpanel",className:(0,r.A)(s.tabItem,a),hidden:n,children:t})}},1470:(e,t,n)=>{n.d(t,{A:()=>w});var r=n(6540),s=n(8215),o=n(3104),a=n(6347),i=n(205),l=n(7485),c=n(1682),d=n(679);function u(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:t,children:n}=e;return(0,r.useMemo)((()=>{const e=t??function(e){return u(e).map((e=>{let{props:{value:t,label:n,attributes:r,default:s}}=e;return{value:t,label:n,attributes:r,default:s}}))}(n);return function(e){const t=(0,c.X)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function m(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function p(e){let{queryString:t=!1,groupId:n}=e;const s=(0,a.W6)(),o=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,l.aZ)(o),(0,r.useCallback)((e=>{if(!o)return;const t=new URLSearchParams(s.location.search);t.set(o,e),s.replace({...s.location,search:t.toString()})}),[o,s])]}function g(e){const{defaultValue:t,queryString:n=!1,groupId:s}=e,o=h(e),[a,l]=(0,r.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!m({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const r=n.find((e=>e.default))??n[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:t,tabValues:o}))),[c,u]=p({queryString:n,groupId:s}),[g,f]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[s,o]=(0,d.Dv)(n);return[s,(0,r.useCallback)((e=>{n&&o.set(e)}),[n,o])]}({groupId:s}),b=(()=>{const e=c??g;return m({value:e,tabValues:o})?e:null})();(0,i.A)((()=>{b&&l(b)}),[b]);return{selectedValue:a,selectValue:(0,r.useCallback)((e=>{if(!m({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);l(e),u(e),f(e)}),[u,f,o]),tabValues:o}}var f=n(2303);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var j=n(4848);function x(e){let{className:t,block:n,selectedValue:r,selectValue:a,tabValues:i}=e;const l=[],{blockElementScrollPositionUntilNextRender:c}=(0,o.a_)(),d=e=>{const t=e.currentTarget,n=l.indexOf(t),s=i[n].value;s!==r&&(c(t),a(s))},u=e=>{let t=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const n=l.indexOf(e.currentTarget)+1;t=l[n]??l[0];break}case"ArrowLeft":{const n=l.indexOf(e.currentTarget)-1;t=l[n]??l[l.length-1];break}}t?.focus()};return(0,j.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.A)("tabs",{"tabs--block":n},t),children:i.map((e=>{let{value:t,label:n,attributes:o}=e;return(0,j.jsx)("li",{role:"tab",tabIndex:r===t?0:-1,"aria-selected":r===t,ref:e=>l.push(e),onKeyDown:u,onClick:d,...o,className:(0,s.A)("tabs__item",b.tabItem,o?.className,{"tabs__item--active":r===t}),children:n??t},t)}))})}function y(e){let{lazy:t,children:n,selectedValue:s}=e;const o=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=o.find((e=>e.props.value===s));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return(0,j.jsx)("div",{className:"margin-top--md",children:o.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==s})))})}function v(e){const t=g(e);return(0,j.jsxs)("div",{className:(0,s.A)("tabs-container",b.tabList),children:[(0,j.jsx)(x,{...t,...e}),(0,j.jsx)(y,{...t,...e})]})}function w(e){const t=(0,f.A)();return(0,j.jsx)(v,{...e,children:u(e.children)},String(t))}},8453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>i});var r=n(6540);const s={},o=r.createContext(s);function a(e){const t=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(o.Provider,{value:t},e.children)}}}]);