"use strict";(self.webpackChunkrobo_js_docs=self.webpackChunkrobo_js_docs||[]).push([[7607],{8726:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>l,default:()=>p,frontMatter:()=>i,metadata:()=>c,toc:()=>u});var s=n(4848),r=n(8453),o=n(1470),a=n(9365);const i={image:"https://preview.robojs.dev?path=/discord-bots/events"},l="\ud83d\udce1 Events",c={id:"discord-bots/events",title:"\ud83d\udce1 Events",description:"Events are the real MVPs in bot development! They're the magical building blocks that make your bot come alive\u2014everything, including commands, are built on top of events!",source:"@site/docs/discord-bots/events.md",sourceDirName:"discord-bots",slug:"/discord-bots/events",permalink:"/discord-bots/events",draft:!1,unlisted:!1,editUrl:"https://github.com/Wave-Play/robo.js/edit/main/docs/docs/discord-bots/events.md",tags:[],version:"current",lastUpdatedBy:"Pkmmte Xeleon",lastUpdatedAt:1717430129e3,frontMatter:{image:"https://preview.robojs.dev?path=/discord-bots/events"},sidebar:"tutorialSidebar",previous:{title:"\ud83d\udc1b Debugging",permalink:"/discord-bots/debug"},next:{title:"\ud83c\udfe0 Inviting to Servers",permalink:"/discord-bots/invite"}},d={},u=[{value:"Setting Up Events \ud83c\udfd7\ufe0f",id:"setting-up-events-\ufe0f",level:2},{value:"<strong>Btw, this is just for example purposes.</strong> Your Robo will automatically log when ready by default!",id:"btw-this-is-just-for-example-purposes-your-robo-will-automatically-log-when-ready-by-default",level:4},{value:"Stacked Events \ud83e\udd5e",id:"stacked-events-",level:2},{value:"Use Cases \ud83d\udee0\ufe0f",id:"use-cases-\ufe0f",level:2},{value:"Intents &amp; Privileged Intents \ud83d\udee1\ufe0f",id:"intents--privileged-intents-\ufe0f",level:2},{value:"Common Event Names \ud83d\udcdc",id:"common-event-names-",level:2},{value:"Robo Lifecycle \ud83d\udd04",id:"robo-lifecycle-",level:2}];function h(e){const t={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h1,{id:"-events",children:"\ud83d\udce1 Events"}),"\n",(0,s.jsx)(t.p,{children:"Events are the real MVPs in bot development! They're the magical building blocks that make your bot come alive\u2014everything, including commands, are built on top of events!"}),"\n",(0,s.jsx)(t.h2,{id:"setting-up-events-\ufe0f",children:"Setting Up Events \ud83c\udfd7\ufe0f"}),"\n",(0,s.jsxs)(t.p,{children:["Setting up events is as easy as creating a file with the name of the event you want to listen to in the ",(0,s.jsx)(t.code,{children:"events"})," directory. Let's say we want to respond when our bot is ready:"]}),"\n",(0,s.jsx)(t.p,{children:"File structure:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"/src\n  /events\n    ready.js\n"})}),"\n",(0,s.jsxs)(t.p,{children:["Code for ",(0,s.jsx)(t.code,{children:"ready.js"}),":"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",metastring:'title="/src/events/ready.js"',children:"export default () => {\n\tconsole.log('Bot is ready!')\n}\n"})}),"\n",(0,s.jsx)(t.p,{children:"Bam! Now, when your bot is ready, it will log 'Bot is ready!' in the console."}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsxs)(t.h4,{id:"btw-this-is-just-for-example-purposes-your-robo-will-automatically-log-when-ready-by-default",children:[(0,s.jsx)(t.strong,{children:"Btw, this is just for example purposes."})," Your Robo will automatically log when ready by default!"]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"stacked-events-",children:"Stacked Events \ud83e\udd5e"}),"\n",(0,s.jsx)(t.p,{children:"Need to listen to the same event with multiple files? No problem! Robo.js allows you to stack events. This is great for separating out different logic or features related to the same event. Let's say we want to do something else when the bot is ready:"}),"\n",(0,s.jsx)(t.p,{children:"File structure:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"/src\n  /events\n    ready.js\n    /ready\n      playStatus.js\n"})}),"\n",(0,s.jsxs)(t.p,{children:["Code for ",(0,s.jsx)(t.code,{children:"playStatus.js"}),":"]}),"\n",(0,s.jsxs)(o.A,{groupId:"examples-script",children:[(0,s.jsx)(a.A,{value:"js",label:"Javascript",children:(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",metastring:'title="src/events/ready/playStatus.js"',children:"export default (client) => {\n\tclient.user.setActivity('with code')\n}\n"})})}),(0,s.jsx)(a.A,{value:"ts",label:"Typescript",children:(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-typescript",metastring:'title="src/events/ready/playStatus.ts"',children:"import type { Client } from 'discord.js'\n\nexport default (client: Client) => {\n\tclient.user.setActivity('with code')\n}\n"})})})]}),"\n",(0,s.jsx)(t.p,{children:"Now, when the bot is ready, it will not only log 'Bot is ready!' in the console, but also set its status to 'Playing with code'!"}),"\n",(0,s.jsxs)(t.p,{children:["For larger bots with more complex use cases, check out our ",(0,s.jsx)(t.a,{href:"/docs/advanced/modules",children:"Modules Documentation"})," to group your events and commands."]}),"\n",(0,s.jsx)(t.h2,{id:"use-cases-\ufe0f",children:"Use Cases \ud83d\udee0\ufe0f"}),"\n",(0,s.jsx)(t.p,{children:"Listening to events opens up a world of possibilities! Here are a few examples:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"ready.js"}),": Sets up initial bot status, schedules tasks, or sends a message to a specific channel when the bot starts."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"guildMemberAdd.js"}),": Sends a welcome message or assigns a default role to a member when they join the guild."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"messageCreate.js"}),": Listens to messages and responds based on the content."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"interactionCreate.js"}),": Listens to button clicks and reactions. You can create a bot that responds to user interactions with your custom buttons or emoji reactions!"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"messageReactionAdd.js"}),": Detects when a new reaction is added to a message. Useful for reaction roles or interactive messages!"]}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["Different events will pass different parameters. For example, the ",(0,s.jsx)(t.code,{children:"messageCreate"})," event will pass the ",(0,s.jsx)(t.code,{children:"message"})," object, and you can use it to reply, react, or do whatever you want! Some events, like ",(0,s.jsx)(t.code,{children:"voiceStateUpdate"}),", even pass down multiple parameters:"]}),"\n",(0,s.jsxs)(o.A,{groupId:"examples-script",children:[(0,s.jsx)(a.A,{value:"js",label:"Javascript",children:(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",metastring:'title="/src/events/voiceStateUpdate.js"',children:"export default (oldState, newState) => {\n\t// do something with oldState and newState\n}\n"})})}),(0,s.jsx)(a.A,{value:"ts",label:"Typescript",children:(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-typescript",metastring:'title="/src/events/voiceStateUpdate.ts"',children:"import type { VoiceState } from 'discord.js'\n\nexport default (oldState: VoiceState, newState: VoiceState) => {\n\t// do something with oldState and newState\n}\n"})})})]}),"\n",(0,s.jsx)(t.h2,{id:"intents--privileged-intents-\ufe0f",children:"Intents & Privileged Intents \ud83d\udee1\ufe0f"}),"\n",(0,s.jsxs)(t.p,{children:["Depending on the events you're trying to listen to, you might need to add more intents in your bot's ",(0,s.jsx)(t.a,{href:"/docs/advanced/configuration",children:"configuration"}),". Note: some events like ",(0,s.jsx)(t.code,{children:"messageContent"})," may require privileged intents to be toggled on in your bot's Discord application settings."]}),"\n",(0,s.jsxs)(t.p,{children:["Privileged intents include ",(0,s.jsx)(t.code,{children:"GUILD_PRESENCES"})," and ",(0,s.jsx)(t.code,{children:"GUILD_MEMBERS"}),", which cover events related to guild members' presence and activities. To enable these, you need to:"]}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["Go to the ",(0,s.jsx)(t.a,{href:"https://discord.com/developers/applications",children:"Discord Developer Portal"})]}),"\n",(0,s.jsx)(t.li,{children:"Select your application"}),"\n",(0,s.jsx)(t.li,{children:'Navigate to the "Bot" section'}),"\n",(0,s.jsx)(t.li,{children:'Scroll down to the "Privileged Gateway Intents" section'}),"\n",(0,s.jsx)(t.li,{children:"Toggle on the intents you need"}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"common-event-names-",children:"Common Event Names \ud83d\udcdc"}),"\n",(0,s.jsxs)(t.p,{children:["For a complete list of event names, check out this handy ",(0,s.jsx)(t.a,{href:"https://gist.github.com/Iliannnn/f4985563833e2538b1b96a8cb89d72bb",children:"Event Names Cheat Sheet"}),". Remember, you don't need to use ",(0,s.jsx)(t.code,{children:"client.on"})," like the examples in the sheet\u2014just create a file named after the event!"]}),"\n",(0,s.jsx)(t.h2,{id:"robo-lifecycle-",children:"Robo Lifecycle \ud83d\udd04"}),"\n",(0,s.jsxs)(t.p,{children:["In Robo.js, we've got some special events to give you an extra level of control over your bot's shenanigans: ",(0,s.jsx)(t.code,{children:"_start"}),", ",(0,s.jsx)(t.code,{children:"_stop"}),", and ",(0,s.jsx)(t.code,{children:"_restart"}),". Each one of these handy events receive the ",(0,s.jsx)(t.code,{children:"client"})," object as a parameter."]}),"\n",(0,s.jsxs)(t.p,{children:["Here's the lowdown: ",(0,s.jsx)(t.code,{children:"_start"})," gets called ",(0,s.jsx)(t.em,{children:"before"})," your bot has logged in. You can return a Promise in these events and Robo.js will patiently wait for them to finish up, but don't leave it hanging too long \u2013 there's a 5-second time limit. "]}),"\n",(0,s.jsx)(t.p,{children:"Use these lifecycle events to tidy up or get things ready for your Robo's grand entrance or exit. Perhaps you need to fire up an API server or disable buttons while your bot's snoozing."})]})}function p(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},9365:(e,t,n)=>{n.d(t,{A:()=>a});n(6540);var s=n(8215);const r={tabItem:"tabItem_Ymn6"};var o=n(4848);function a(e){let{children:t,hidden:n,className:a}=e;return(0,o.jsx)("div",{role:"tabpanel",className:(0,s.A)(r.tabItem,a),hidden:n,children:t})}},1470:(e,t,n)=>{n.d(t,{A:()=>w});var s=n(6540),r=n(8215),o=n(3104),a=n(6347),i=n(205),l=n(7485),c=n(1682),d=n(679);function u(e){return s.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,s.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:t,children:n}=e;return(0,s.useMemo)((()=>{const e=t??function(e){return u(e).map((e=>{let{props:{value:t,label:n,attributes:s,default:r}}=e;return{value:t,label:n,attributes:s,default:r}}))}(n);return function(e){const t=(0,c.X)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function p(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function m(e){let{queryString:t=!1,groupId:n}=e;const r=(0,a.W6)(),o=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,l.aZ)(o),(0,s.useCallback)((e=>{if(!o)return;const t=new URLSearchParams(r.location.search);t.set(o,e),r.replace({...r.location,search:t.toString()})}),[o,r])]}function v(e){const{defaultValue:t,queryString:n=!1,groupId:r}=e,o=h(e),[a,l]=(0,s.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!p({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const s=n.find((e=>e.default))??n[0];if(!s)throw new Error("Unexpected error: 0 tabValues");return s.value}({defaultValue:t,tabValues:o}))),[c,u]=m({queryString:n,groupId:r}),[v,b]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[r,o]=(0,d.Dv)(n);return[r,(0,s.useCallback)((e=>{n&&o.set(e)}),[n,o])]}({groupId:r}),g=(()=>{const e=c??v;return p({value:e,tabValues:o})?e:null})();(0,i.A)((()=>{g&&l(g)}),[g]);return{selectedValue:a,selectValue:(0,s.useCallback)((e=>{if(!p({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);l(e),u(e),b(e)}),[u,b,o]),tabValues:o}}var b=n(2303);const g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var j=n(4848);function f(e){let{className:t,block:n,selectedValue:s,selectValue:a,tabValues:i}=e;const l=[],{blockElementScrollPositionUntilNextRender:c}=(0,o.a_)(),d=e=>{const t=e.currentTarget,n=l.indexOf(t),r=i[n].value;r!==s&&(c(t),a(r))},u=e=>{let t=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const n=l.indexOf(e.currentTarget)+1;t=l[n]??l[0];break}case"ArrowLeft":{const n=l.indexOf(e.currentTarget)-1;t=l[n]??l[l.length-1];break}}t?.focus()};return(0,j.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":n},t),children:i.map((e=>{let{value:t,label:n,attributes:o}=e;return(0,j.jsx)("li",{role:"tab",tabIndex:s===t?0:-1,"aria-selected":s===t,ref:e=>l.push(e),onKeyDown:u,onClick:d,...o,className:(0,r.A)("tabs__item",g.tabItem,o?.className,{"tabs__item--active":s===t}),children:n??t},t)}))})}function x(e){let{lazy:t,children:n,selectedValue:r}=e;const o=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=o.find((e=>e.props.value===r));return e?(0,s.cloneElement)(e,{className:"margin-top--md"}):null}return(0,j.jsx)("div",{className:"margin-top--md",children:o.map(((e,t)=>(0,s.cloneElement)(e,{key:t,hidden:e.props.value!==r})))})}function y(e){const t=v(e);return(0,j.jsxs)("div",{className:(0,r.A)("tabs-container",g.tabList),children:[(0,j.jsx)(f,{...t,...e}),(0,j.jsx)(x,{...t,...e})]})}function w(e){const t=(0,b.A)();return(0,j.jsx)(y,{...e,children:u(e.children)},String(t))}},8453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>i});var s=n(6540);const r={},o=s.createContext(r);function a(e){const t=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(o.Provider,{value:t},e.children)}}}]);